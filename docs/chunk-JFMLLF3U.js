import{$ as _,A as G,B as i,C as r,D as s,E as H,F as f,G as M,H as Y,I as a,J as g,K as P,L as ve,M as B,N as he,O as Q,P as Z,R as se,S as ue,T as x,U as be,V as Re,W as J,Y as Se,a as le,aa as xe,b as pe,ba as N,c as C,ca as K,d as V,da as _e,e as T,f as F,g as O,h as me,i as p,j as de,k as D,l as I,m as q,n as j,o as ye,p as y,q as fe,r as $,s as c,t as m,u as U,v as d,w as ge,x as S,y as Ce,z}from"./chunk-FVJWK5LH.js";var A=class n{placeholder=y("Buscar");debounceTime=y(500);initialValue=y("");value=ye();inputValue=x(()=>this.initialValue()??"");debounceEffect=ue(e=>{let t=this.inputValue(),o=setTimeout(()=>{this.value.emit(t)},this.debounceTime());e(()=>{clearTimeout(o)})});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-country-search-input"]],inputs:{placeholder:[1,"placeholder"],debounceTime:[1,"debounceTime"],initialValue:[1,"initialValue"]},outputs:{value:"value"},decls:5,vars:2,consts:[["txtSearch",""],[1,"flex","flex-row","gap-2","mt-2"],["type","text","autofocus","",1,"input","input-bordered","mr-2","w-56",3,"keyup.enter","keyup","placeholder","value"],[1,"btn","btn-primary",3,"click"]],template:function(t,o){if(t&1){let u=H();i(0,"section",1)(1,"input",2,0),f("keyup.enter",function(){D(u);let E=Y(2);return I(o.value.emit(E.value))})("keyup",function(){D(u);let E=Y(2);return I(o.inputValue.set(E.value))}),r(),i(3,"button",3),f("click",function(){D(u);let E=Y(2);return I(o.value.emit(E.value))}),a(4," Buscar "),r()()}t&2&&(c(),d("placeholder",o.placeholder())("value",o.initialValue()))},encapsulation:2})};var we=n=>["/country/by",n],Ee=(n,e)=>e.cca2;function ke(n,e){if(n&1&&(i(0,"tr")(1,"td"),a(2),r(),i(3,"td"),a(4),r(),i(5,"td"),s(6,"img",2),r(),i(7,"td"),a(8),r(),i(9,"td"),a(10),r(),i(11,"td")(12,"span",3),a(13),Q(14,"number"),r()(),i(15,"td")(16,"a",4),a(17,"Mas info"),r()()()),n&2){let t=e.$implicit,o=e.$index;c(2),g(o+1),c(2),g(t.flag),c(2),d("src",t.flagSvg,$)("alt",t.name),c(2),g(t.name),c(2),g(t.capital),c(3),g(Z(14,8,t.population)),c(3),d("routerLink",he(10,we,t.cca2))}}function Me(n,e){if(n&1&&(i(0,"tr")(1,"td",5),a(2),r()()),n&2){let t=M();c(2),P(" ",t.errorMesage()," ")}}function Pe(n,e){n&1&&(i(0,"tr")(1,"td",5),a(2," No se encontraron resultados "),r()())}function Le(n,e){n&1&&(i(0,"tr")(1,"td",5),a(2," Buscando paises "),r()())}var w=class n{countries=y.required();errorMesage=y();isLoading=y(!1);isEmpty=y(!1);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["country-list"]],inputs:{countries:[1,"countries"],errorMesage:[1,"errorMesage"],isLoading:[1,"isLoading"],isEmpty:[1,"isEmpty"]},decls:22,vars:3,consts:[[1,"mt-5"],[1,"table","table-md","mt-2","w-full"],[1,"w-10",3,"src","alt"],[1,"bagde","badge-neutral"],[1,"link-primary","cursor-pointer",3,"routerLink"],["colspan","8",1,"text-center"]],template:function(t,o){t&1&&(i(0,"section",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),a(5,"#"),r(),i(6,"th"),a(7,"Icono"),r(),i(8,"th"),a(9,"Bandera"),r(),i(10,"th"),a(11,"Nombre"),r(),i(12,"th"),a(13,"Capital"),r(),i(14,"th"),a(15,"Poblacion"),r()()(),i(16,"tbody"),z(17,ke,18,12,"tr",null,Ee),U(19,Me,3,1,"tr")(20,Pe,3,0,"tr")(21,Le,3,0,"tr"),r()()()),t&2&&(c(17),G(o.countries()),c(2),S(o.errorMesage()?19:-1),c(),S(o.countries().length===0&&!o.isLoading()?20:-1),c(),S(o.isLoading()?21:-1))},dependencies:[J,K],encapsulation:2})};var L=class{static mapRestCountryToCountry(e){return{capital:e.capital?.join(","),cca2:e.cca2,flag:e.flag,flagSvg:e.flags.svg,name:e.translations.spa.common??"No spanish name",population:e.population,region:e.region,subRegion:e.subregion}}static mapRestCountryArrayToCountryArray(e){return e.map(this.mapRestCountryToCountry)}};var W="https://restcountries.com/v3.1",h=class n{queryCacheCapital=new Map;queryCacheCountry=new Map;queryCacheRegion=new Map;http=p(Se);searchByCapital(e){return e=e.toLocaleLowerCase(),this.queryCacheCapital.has(e)?C(this.queryCacheCapital.get(e)??[]):this.http.get(`${W}/capital/${e}`).pipe(T(t=>L.mapRestCountryArrayToCountryArray(t)),O(t=>this.queryCacheCapital.set(e,t)),F(t=>(console.log("Error fetching ",t),V(()=>new Error(`No se pueden obtener paises con esa query: ${e}`)))))}searchByCountry(e){return e=e.toLocaleLowerCase(),this.queryCacheCountry.has(e)?C(this.queryCacheCountry.get(e)??[]):(console.log(`si se repite esta vaina el guardado en cache no sirve:  ${e}`),this.http.get(`${W}/name/${e}`).pipe(T(t=>L.mapRestCountryArrayToCountryArray(t)),O(t=>this.queryCacheCountry.set(e,t)),F(t=>(console.log("Error fetching ",t),V(()=>new Error(`No se pueden obtener paises con ese nombre : ${e}`))))))}searchCountryByAlphaCode(e){return this.http.get(`${W}/alpha/${e}`).pipe(T(t=>L.mapRestCountryArrayToCountryArray(t)),T(t=>t.at(0)),F(t=>(console.log("Error fetching ",t),V(()=>new Error(`No se pueden obtener paises con ese codigo : ${e}`)))))}searchByRegion(e){return this.queryCacheRegion.has(e)?C(this.queryCacheRegion.get(e)??[]):(console.log(`si se repite esta vaina el guardado en cache no sirve:  ${e}`),this.http.get(`${W}/region/${e}`).pipe(T(t=>L.mapRestCountryArrayToCountryArray(t)),O(t=>this.queryCacheRegion.set(e,t)),F(t=>(console.log("Error fetching ",t),V(()=>new Error(`No se pueden obtener paises con esa query: ${e}`))))))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})};function R(n){return n?.injector||de(R),be(pe(le({},n),{loader:void 0,stream:e=>{let t,o=()=>t.unsubscribe();e.abortSignal.addEventListener("abort",o);let u=fe({value:void 0}),l,E=new Promise(k=>l=k);function ce(k){u.set(k),l?.(u),l=void 0}return t=n.loader(e).subscribe({next:k=>ce({value:k}),error:k=>{ce({error:k}),e.abortSignal.removeEventListener("abort",o)},complete:()=>{l&&ce({error:new Error("Resource completed before producing a value")}),e.abortSignal.removeEventListener("abort",o)}}),E}}))}var Te=()=>[],X=class n{countryService=p(h);activatedRoute=p(_);router=p(N);queryParam=this.activatedRoute.snapshot.queryParamMap.get("query")??"";query=x(()=>this.queryParam);countryResource=R({request:()=>({query:this.query()}),loader:({request:e})=>(console.log({query:e.query}),e.query?(this.router.navigate(["/country/by-capital"],{queryParams:{query:e.query}}),this.countryService.searchByCapital(e.query)):C([]))});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-by-capital-page"]],decls:2,vars:7,consts:[["placeholder","Buscar por capital",3,"value","debounceTime","initialValue"],[3,"countries","errorMesage","isEmpty","isLoading"]],template:function(t,o){if(t&1&&(i(0,"app-country-search-input",0),f("value",function(l){return o.query.set(l)}),r(),s(1,"country-list",1)),t&2){let u,l;d("debounceTime",300)("initialValue",o.query()),c(),d("countries",(u=o.countryResource.value())!==null&&u!==void 0?u:B(6,Te))("errorMesage",o.countryResource.error())("isEmpty",((l=o.countryResource.value())==null?null:l.length)===0)("isLoading",o.countryResource.isLoading())}},dependencies:[A,w],encapsulation:2})};var ee=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["country-top-menu"]],decls:17,vars:0,consts:[[1,"p-4","wfull"],[1,"menu","bg-base-200","sm:menu-horizontal","rounded-box"],["routerLink","by-capital","routerLinkActive","btn-primary",1,"btn"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","d","M.5 15.5v-2.25S6 10.5 9.75 9.5V4.211c0-.79.23-1.565.707-2.194c.364-.48.828-1.052 1.293-1.517h.5c.465.465.93 1.037 1.293 1.517c.478.629.707 1.404.707 2.194V9.5c3.75 1 9.25 3.75 9.25 3.75v2.25s-5.5-1-9.25-1c0 0-.5 2.28-.5 6.5c0 0 1.25.75 2.25 1.75v.5S13.75 23 12 23s-4 .25-4 .25v-.5c1-1 2.25-1.75 2.25-1.75c0-4.22-.5-6.5-.5-6.5c-3.75 0-9.25 1-9.25 1Z","stroke-width","1"],["routerLink","by-country","routerLinkActive","btn-primary",1,"btn"],["fill","none","stroke","currentColor","d","M23 12c0-6.075-4.925-11-11-11m11 11c0 6.075-4.925 11-11 11m11-11c0 2.21-4.925 4-11 4S1 14.21 1 12M12 1C5.925 1 1 5.925 1 12M12 1c2.761 0 5 4.925 5 11s-2.239 11-5 11m0-22C9.239 1 7 5.925 7 12s2.239 11 5 11M1 12c0 6.075 4.925 11 11 11","stroke-width","1"],["routerLink","by-region","routerLinkActive","btn-primary",1,"btn"],["fill","none","stroke","currentColor","d","M14.004 23.5c-1 0-1.75-1.5-1.75-1.5c-.75-1.5-.75-3.5-.75-5v-.5l-5-2.5v-.25l1.803-5.228A3 3 0 0 1 11.143 6.5h1.361l.518 2.588a3 3 0 0 0 2.942 2.412h3.04m-9.5 6c-.21 0-.466.133-.737.344C6.963 19.24 6.504 21.718 6.504 24m11.932-11l-1.932 10.9M19.5 7l-.532 3M6.504 6L4.78 11m7.574-6.5s-1.6-1-1.6-2.25c0-.966.784-1.75 1.75-1.75c.967 0 1.746.784 1.746 1.75c0 1.25-1.596 2.25-1.596 2.25z","stroke-width","1"]],template:function(t,o){t&1&&(i(0,"nav",0)(1,"ul",1)(2,"li")(3,"a",2),q(),i(4,"svg",3),s(5,"path",4),r(),a(6," Por capital "),r()(),j(),i(7,"li")(8,"a",5),q(),i(9,"svg",3),s(10,"path",6),r(),a(11," Por pais "),r()(),j(),i(12,"li")(13,"a",7),q(),i(14,"svg",3),s(15,"path",8),r(),a(16," Por region "),r()()()())},dependencies:[K,_e],encapsulation:2,changeDetection:0})};var te=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-country-layout"]],decls:3,vars:0,consts:[[1,"px-4"]],template:function(t,o){t&1&&(s(0,"country-top-menu"),i(1,"section",0),s(2,"router-outlet"),r())},dependencies:[xe,ee],encapsulation:2})};var De=()=>[],ne=class n{countryService=p(h);activatedRoute=p(_);router=p(N);queryParam=this.activatedRoute.snapshot.queryParamMap.get("query")??"";query=x(()=>this.queryParam);countryResource=R({request:()=>({query:this.query()}),loader:({request:e})=>(console.log({query:e.query}),e.query?(this.router.navigate(["/country/by-country"],{queryParams:{query:e.query}}),this.countryService.searchByCountry(e.query)):C([]))});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-by-country-page"]],decls:2,vars:6,consts:[["placeholder","Buscar por pais",3,"value","initialValue"],[3,"countries","errorMesage","isEmpty","isLoading"]],template:function(t,o){if(t&1&&(i(0,"app-country-search-input",0),f("value",function(l){return o.query.set(l)}),r(),s(1,"country-list",1)),t&2){let u,l;d("initialValue",o.query()),c(),d("countries",(u=o.countryResource.value())!==null&&u!==void 0?u:B(5,De))("errorMesage",o.countryResource.error())("isEmpty",((l=o.countryResource.value())==null?null:l.length)===0)("isLoading",o.countryResource.isLoading())}},dependencies:[A,w],encapsulation:2})};var Ie=()=>[];function qe(n,e){if(n&1){let t=H();i(0,"button",5),f("click",function(){let u=D(t).$implicit,l=M();return I(l.selectedRegion.set(u))}),a(1),r()}if(n&2){let t=e.$implicit,o=M();ge("btn-primary",o.selectedRegion()===t),c(),P(" ",t," ")}}function Be(n){return n=n.toLocaleLowerCase(),{africa:"Africa",americas:"Americas",asia:"Asia",europe:"Europe",oceania:"Oceania",antarctic:"Antarctic"}[n]??"Americas"}var oe=class n{countryService=p(h);regions=["Africa","Americas","Asia","Europe","Oceania","Antarctic"];activatedRoute=p(_);router=p(N);queryParam=this.activatedRoute.snapshot.queryParamMap.get("region")??"";selectedRegion=x(()=>Be(this.queryParam));countryResource=R({request:()=>({region:this.selectedRegion()}),loader:({request:e})=>e.region?(this.router.navigate(["/country/by-region"],{queryParams:{region:e.region}}),this.countryService.searchByRegion(e.region)):C([])});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-by-region-page"]],decls:7,vars:5,consts:[[1,"text-2xl"],[1,"row","mt-2"],[1,"flex-col"],[1,"btn","btn-outline","mr-2","w-[100px]",3,"btn-primary"],[3,"countries","errorMesage","isEmpty","isLoading"],[1,"btn","btn-outline","mr-2","w-[100px]",3,"click"]],template:function(t,o){if(t&1&&(i(0,"h1",0),a(1,"Seleccione una region"),r(),i(2,"section",1)(3,"div",2),z(4,qe,2,3,"button",3,Ce),r()(),s(6,"country-list",4)),t&2){let u,l;c(4),G(o.regions),c(2),d("countries",(u=o.countryResource.value())!==null&&u!==void 0?u:B(4,Ie))("errorMesage",o.countryResource.error())("isEmpty",((l=o.countryResource.value())==null?null:l.length)===0)("isLoading",o.countryResource.isLoading())}},dependencies:[w],encapsulation:2})};var re=class n{location=p(Re);goBack(){this.location.back()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-not-found"]],decls:7,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","mt-10"],["xmlns","http://www.w3.org/2000/svg","width","74","height","74","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8v3a1 1 0 0 0 1 1h3m0-4v8m10-8v3a1 1 0 0 0 1 1h3m0-4v8m-11-6v4a2 2 0 1 0 4 0v-4a2 2 0 1 0-4 0"],[1,"link-primary","cursor-pointer",3,"click"]],template:function(t,o){t&1&&(i(0,"section",0),q(),i(1,"svg",1),s(2,"path",2),r(),j(),i(3,"h1"),a(4," No se encontro el pais "),r(),i(5,"a",3),f("click",function(){return o.goBack()}),a(6," Regresar"),r()())},encapsulation:2})};var ie=class n{country=y.required();currentYear=se(()=>new Date().getFullYear());static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["country-information"]],inputs:{country:[1,"country"]},decls:34,vars:13,consts:[[1,"mx-10"],[1,"text-3xl"],[1,"text-3xl","font-bold"],[1,"flex","flex-col","mx-10","my-5"],[1,"stats","shadow"],[1,"stat","place-items-center"],[1,"stat-title"],[1,"stat-value"],[1,"stat-desc"],["tabindex","0",1,"diff","aspect-16/9"],["role","img","tabindex","0",1,"diff-item-1"],["alt","daisy",3,"src"],["role","img",1,"diff-item-2"],[1,"blur","brightness-75",3,"alt","src"],[1,"diff-resizer"]],template:function(t,o){t&1&&(i(0,"section",0)(1,"h1",1),a(2),r(),i(3,"h1",2),a(4),r()(),i(5,"section",3)(6,"div",4)(7,"div",5)(8,"div",6),a(9,"Poblacion"),r(),i(10,"div",7),a(11),Q(12,"number"),r(),i(13,"div",8),a(14),r()(),i(15,"div",5)(16,"div",6),a(17,"Region perteneciente"),r(),i(18,"div",7),a(19),r(),s(20,"div",8),r(),i(21,"div",5)(22,"div",6),a(23,"Sub region"),r(),i(24,"div",7),a(25),r(),i(26,"div",8),a(27),r()()()(),i(28,"div",9)(29,"div",10),s(30,"img",11),r(),i(31,"div",12),s(32,"img",13),r(),s(33,"div",14),r()),t&2&&(c(2),P("[",o.country().cca2,"]"),c(2),ve("",o.country().name," - ",o.country().flag,""),c(7),g(Z(12,11,o.country().population)),c(3),P("En ",o.currentYear(),""),c(5),g(o.country().region),c(6),g(o.country().subRegion),c(2),g(o.country().region),c(3),d("src",o.country().flagSvg,$),c(2),d("alt",o.country().name)("src",o.country().flagSvg,$))},dependencies:[J],encapsulation:2,changeDetection:0})};function Ne(n,e){n&1&&s(0,"app-not-found")}function Ae(n,e){n&1&&(i(0,"h1",0),a(1," Cargando "),r())}function Ve(n,e){if(n&1&&s(0,"country-information",1),n&2){let t=M();d("country",t.countryResource.value())}}var ae=class n{countryCode=p(_).snapshot.params.code;countryService=p(h);countryResource=R({request:()=>({code:this.countryCode}),loader:({request:e})=>this.countryService.searchCountryByAlphaCode(e.code)});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["country-page"]],decls:3,vars:3,consts:[[1,"text-3xl"],[3,"country"]],template:function(t,o){t&1&&U(0,Ne,1,0,"app-not-found")(1,Ae,2,0,"h1",0)(2,Ve,1,1,"country-information",1),t&2&&(S(o.countryResource.error()?0:-1),c(),S(o.countryResource.isLoading()?1:-1),c(),S(o.countryResource.hasValue()?2:-1))},dependencies:[re,ie],encapsulation:2})};var Fe=[{path:"",component:te,children:[{path:"by-capital",component:X},{path:"by-country",component:ne},{path:"by-region",component:oe},{path:"by/:code",component:ae},{path:"**",redirectTo:"by-capital"}]}],Sn=Fe;export{Fe as CountryRoutes,Sn as default};
